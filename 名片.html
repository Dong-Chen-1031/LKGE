<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>名片-陳柏東</title>
    <link href="名片.css" rel="stylesheet">
    <base href="https://dong-chen-1031.github.io/LKGE/">
    <style>
        .hide{display: none;}
    </style>
</head>
<body>
    <div class="lkgediv flex">
        <img src="資優班LOGO.png" class="lkgeimg item">
        <p class="lkgetext flexitem">林口國小資優班</p>
    </div>
    <hr class="hr1"/>
    <div class="dongdiv">
        <div class="flex namediv">
            <p class="namea">學生：</p>
            <img src="Dong_loge1.0_-_複製-removebg-preview.png" class="lkgeimg item dongimg" id="img">
            <p class="flexitem flexitem name" id="name">loding</p>
        </div>
        <p class="tt">地址：<span id="address">loding</span></p>
        <a href='#' id="Emaila"><p class="tt">電子郵件:<span id="Email">loding</span></p></a>
        <p class="tt">行動電話：<span id="phone">loding</span></p>
    </div>
    <div onclick="openwhy();"><p class="whyopen">名片原理　▼</p></div>
    <div id='why' class="hide">
        <p>
            本名片的內容會隨著一個json檔案改變(
            <a href="https://dong-chen-1031.github.io/LKGE/%E5%90%8D%E7%89%87.json" target="_blank">
                https://dong-chen-1031.github.io/LKGE/名片.json
            </a>)，json內容如下：
        </p>
        <textarea cols="30" rows="10" id="whyw"></textarea>
    </div>
    <script>
        function update (result){
            var iten = ['address','name','phone','Email']
            var iten0 = result[0]
            for (var i = 0; i < iten.length; i++) {
                eval('document.getElementById(iten[i]).innerText = iten0.'+iten[i])
            }
            document.getElementById('Emaila').setAttribute('href','mailto:'+iten0.Email)
            document.getElementById('img').setAttribute('src',iten0.img)
        }
        fetch("https://dong-chen-1031.github.io/LKGE/%E5%90%8D%E7%89%87.json").then(function(response){
            return response.text();
        }).then(function(re){
            document.getElementById('whyw').innerText = re;
            return JSON.parse(re);
        }).then(update);
        function openwhy(){
            document.getElementById('why').classList.toggle('hide')
        } 
    </script> 
</body>
</html>